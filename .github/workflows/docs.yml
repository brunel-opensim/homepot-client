name: Documentation

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

# Set permissions for GITHUB_TOKEN
permissions:
  contents: read

jobs:
  validate-docs:
    timeout-minutes: 5
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Validate documentation files
      run: |
        set -e
        echo "📚 Validating documentation files..."
        
        # Check that essential documentation files exist
        test -f README.md || (echo "❌ ERROR: README.md missing" && exit 1)
        test -f CONTRIBUTING.md || (echo "❌ ERROR: CONTRIBUTING.md missing" && exit 1)
        test -f docs/index.md || (echo "❌ ERROR: docs/index.md missing" && exit 1)
        test -f docs/api-reference.md || (echo "❌ ERROR: docs/api-reference.md missing" && exit 1)
        test -f docs/cli-reference.md || (echo "❌ ERROR: docs/cli-reference.md missing" && exit 1)
        test -f docs/getting-started.md || (echo "❌ ERROR: docs/getting-started.md missing" && exit 1)
        
        # Check that files are not empty
        test -s README.md || (echo "❌ ERROR: README.md is empty" && exit 1)
        test -s docs/index.md || (echo "❌ ERROR: docs/index.md is empty" && exit 1)
        
        echo "✅ All essential documentation files validated successfully!"
        echo "📁 Documentation structure:"
        find docs/ -name "*.md" | sort
